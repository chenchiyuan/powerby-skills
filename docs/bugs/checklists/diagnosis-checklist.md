# Bug诊断分析检查清单（简化版）

**文档版本**: v3.1.0
**创建日期**: 2025-12-26
**适用范围**: 三层立体诊断分析框架 + 需求对齐
**更新说明**:
- v3.0.0 - 简化版：基于检查方法和原则，而非检查项清单
- v3.1.0 - 问题报告阶段新增需求对齐与澄清环节

---

## 📋 使用说明

此检查清单用于指导Bug诊断分析阶段的工作，**聚焦相关部分**，采用**检查方法**而非检查项的方式，确保诊断的全面性和准确性。

**使用原则**：
- **必须先完成需求对齐**：在开始诊断前，必须明确什么是"正确"的状态
- 聚焦与bug相关的代码和功能，不扩展到无关内容
- 按照检查方法进行分析，而非逐项勾选
- 必须遵循验证原则，确保诊断质量
- 所有验证完成后才能进入修复方案阶段

---

## 🔍 第零步：需求对齐与澄清

### 相关需求查找
- [ ] 已列出相关PRD文档
- [ ] 已列出具体的需求条目
- [ ] 已列出功能模块名称

### 需求对齐
- [ ] 已明确业务目标
- [ ] 已明确功能期望
- [ ] 已明确验收标准

### 正确状态定义 ✅
**必须量化明确的表达正确情况**：
- [ ] **功能表现**：[UI应该如何显示/交互]
- [ ] **业务逻辑**：[数据应该如何处理/流转]
- [ ] **数据状态**：[数据应该如何存储/更新]
- [ ] **边界条件**：[在什么情况下应该如何处理]
- [ ] **异常处理**：[遇到错误时应该如何响应]

### 用户确认 📋
- [ ] 相关需求理解正确
- [ ] 正确状态定义清晰
- [ ] 验收标准明确可量化
- [ ] 可以开始诊断分析

---

## 🔍 第一步：相关代码识别

### 表现层相关
- [ ] 列出与bug相关的UI组件文件（仅相关）
- [ ] 列出与bug相关的交互逻辑文件（仅相关）
- [ ] 列出与bug相关的样式文件（如有）

### 逻辑层相关
- [ ] 列出与bug相关的业务逻辑文件（仅相关）
- [ ] 列出与bug相关的算法文件（仅相关）
- [ ] 列出与bug相关的状态管理文件（如有）

### 数据层相关
- [ ] 列出与bug相关的数据操作文件（仅相关）
- [ ] 列出与bug相关的API文件（仅相关）
- [ ] 列出与bug相关的数据模型文件（如有）

---

## 🛠️ 第二步：检查方法指南

### 表现层检查方法
**检查维度**：UI表现是否符合预期

#### 方法1：对比预期表现与实际表现
- **怎么做**：描述应该显示什么 vs 实际显示什么
- **关注点**：
  - 差异点：具体哪些地方不同
  - 触发条件：在什么操作下出现异常
  - 异常表现形式：错误的UI行为是什么

#### 方法2：检查UI逻辑的正确性
- **怎么做**：审查UI组件的渲染逻辑和交互逻辑
- **关注点**：
  - 状态管理：UI状态是否正确更新
  - 事件处理：用户交互是否正确响应
  - 渲染条件：UI组件在什么条件下渲染

**输出**：表现层是否异常？异常表现是什么？

### 逻辑层检查方法
**检查维度**：业务逻辑是否正确

#### 方法1：追踪业务逻辑执行路径
- **怎么做**：用文字或Mermaid描述逻辑流程
- **关注点**：
  - 关键决策点：逻辑中的重要分支
  - 异常分支：错误处理逻辑
  - 状态转换：逻辑执行中的状态变化

#### 方法2：验证逻辑结果的正确性
- **怎么做**：检查逻辑处理的输出结果
- **关注点**：
  - 边界条件：极限情况下的逻辑行为
  - 业务规则：是否符合业务需求
  - 数据处理：数据转换是否正确

**输出**：逻辑层是否异常？异常逻辑是什么？

### 数据层检查方法
**检查维度**：数据操作是否正确

#### 方法1：追踪数据流向
- **怎么做**：描述数据如何流入流出系统
- **关注点**：
  - 数据源：数据从哪里来
  - 数据处理：数据如何被处理
  - 数据目标：数据最终存储到哪里

#### 方法2：验证数据完整性
- **怎么做**：检查数据是否完整、一致、无错误
- **关注点**：
  - CRUD操作：数据的增删改查是否正确
  - 事务处理：事务是否正确提交或回滚
  - 并发问题：是否存在数据竞争或脏读

**输出**：数据层是否异常？异常数据是什么？

---

## ✅ 第三步：验证原则

### 双重验证原则
每层都必须进行：
1. **正向证明**：有什么证据证明这层是正确的？
   - 列出具体的证据
   - 每个证据都要有明确来源

2. **反向排除**：有什么证据证明这层不是问题所在？
   - 分析可能的错误原因
   - 逐一排除不可能的情况
   - 排除要有明确理由

### 跨层验证原则
检查层与层之间的关联：

#### 表现↔逻辑
- 表现的异常是否由逻辑导致？
- 逻辑的状态变化是否正确反映到表现？

#### 逻辑↔数据
- 逻辑的异常是否由数据导致？
- 逻辑的处理结果是否正确存储到数据层？

#### 数据↔表现
- 数据的异常是否导致表现异常？
- 数据的变化是否正确反映到UI？

### 整体检查原则 ✨
从整体角度审视三层关系：
- **整体闭环**：数据→逻辑→表现→数据是否形成完整闭环？
- **逻辑自洽**：三层之间的因果关系是否合理？
- **一致性**：从整体角度看，系统行为是否一致？

### 严格判定原则
**数据+逻辑+需求+表现均正确才视为正确**
- 即使表现层正常，也不能草率认为没问题
- 必须检查数据层和逻辑层是否真正正确
- 发现任何一层的异常都不能忽视
- 不能因为单一层面无异常就标记为整体正确

---

## 🎯 第四步：诊断结论

### 异常定位
- **根因所在层**：[表现层/逻辑层/数据层]
- **具体问题**：[用一句话描述问题本质]
- **相关代码**：[列出关键代码文件+行号/函数名]
- **触发机制**：[如何触发的问题]

### 影响范围
- **影响的表现**：[哪些UI表现受影响]
- **影响的逻辑**：[哪些业务逻辑受影响]
- **影响的数据**：[哪些数据受影响]
- **影响的功能**：[影响哪些功能模块]
- **影响的用户**：[影响哪些用户群体]

### 严重程度
- **P0**：数据层严重问题，影响数据完整性或安全性
- **P1**：逻辑层严重问题，影响核心业务功能
- **P2**：表现层问题，影响用户体验但有替代方案
- **P3**：轻微问题，不影响主要功能

### 修复建议
- **修复方向**：[用1-2句话描述修复方向]
- **修复策略**：[最优修复策略是什么]
- **注意事项**：[修复时需要注意什么]

### 整体验证 ✨
- **三层闭环**：[是/否]
  - 数据→逻辑→表现→数据是否形成闭环？
- **逻辑自洽**：[是/否]
  - 三层之间的因果关系是否合理？
- **整体一致性**：[是/否]
  - 从全局角度看，系统是否逻辑一致？
- **修复后预期**：[修复后的整体状态描述]

---

## 📊 诊断分析总结

**Bug ID**：[填写Bug编号]
**诊断人员**：[填写诊断人员]
**诊断日期**：[填写诊断日期]
**诊断耗时**：[填写实际耗时]

**三层诊断结果**：
- 表现层状态：[正常/异常]
- 逻辑层状态：[正常/异常]
- 数据层状态：[正常/异常]

**根因所在层**：[表现层/逻辑层/数据层]
**具体位置**：[代码文件+行号/函数名]
**严重程度**：[P0/P1/P2/P3]
**修复优先级**：[P0/P1/P2/P3]

**关键证据**：
1. [证据1]
2. [证据2]
3. [证据3]

**修复建议**：
[简要描述修复建议]

**整体验证结果**：
- 三层闭环：[完整/不完整]
- 逻辑自洽：[是/否]
- 整体一致性：[一致/不一致]

---

**检查清单版本**: v3.1.0
**最后更新**: 2025-12-26
**维护者**: PowerBy Team
